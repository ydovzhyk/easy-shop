{"version":3,"file":"static/js/795.120d6f87.chunk.js","mappings":"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","sources":["webpack://easy-shop/./src/components/Dialogue/Dialogue.module.scss?2cf4","components/Dialogue/Dialogue.jsx","webpack://easy-shop/./src/components/Profile/MySales/MySales.module.scss?fad3","components/Profile/MySales/MySales.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"dialogueContainer\":\"Dialogue_dialogueContainer__FuS7j\",\"additionalOpts\":\"Dialogue_additionalOpts__o-iwF\",\"avatar\":\"Dialogue_avatar__Snahc\",\"textInputArea\":\"Dialogue_textInputArea__7QqLK\",\"dialogueGroup\":\"Dialogue_dialogueGroup__CccDt\",\"dialogueBox\":\"Dialogue_dialogueBox__Zqye0\",\"dialogueMessage\":\"Dialogue_dialogueMessage__tL3Cl\",\"dialogueMessageRight\":\"Dialogue_dialogueMessageRight__KBBVw\",\"textDate\":\"Dialogue_textDate__qAQ-I\",\"textarea\":\"Dialogue_textarea__F4Goc\",\"questionButton\":\"Dialogue_questionButton__et0nJ\"};","import { useEffect, useState, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { createDialogue } from 'redux/dialogue/dialogue-operations';\nimport { getLogin, getUser, getUserAvatar } from 'redux/auth/auth-selectors';\nimport {\n  getDialogueStore,\n  getDialoguesArrayStoreNew,\n  getIsNewMessage,\n} from 'redux/dialogue/dialogue-selectors';\nimport {\n  clearDialogue,\n  changeStatusIsNewMessage,\n  updateDialoguesArray,\n  updateDialogueStore,\n} from 'redux/dialogue/dialogue-slice';\n\nimport {\n  getDialogue,\n  deleteDialogueNewMessage,\n} from 'redux/dialogue/dialogue-operations';\n\n// import { BiMessageDetail } from 'react-icons/bi';\nimport Text from 'components/Shared/Text/Text';\nimport Avatar from 'components/Profile/Avatar/Avatar';\nimport Button from 'components/Shared/Button/Button';\n\nimport s from './Dialogue.module.scss';\n\nconst Dialogue = ({ productInfo }) => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const productId = productInfo._id;\n  const productOwner = productInfo.owner;\n  const selectedDialogueId = productInfo.userDialogue;\n\n  const userAvatar = useSelector(getUserAvatar);\n  const user = useSelector(getUser);\n  const isUserLogin = useSelector(getLogin);\n  const dialoguesArray = useSelector(getDialoguesArrayStoreNew);\n  const isNewMessage = useSelector(getIsNewMessage);\n\n  const [myQuestion, setMyQuestion] = useState('');\n  const [isShowComponent, setIsShowComponent] = useState(false);\n  const [isProductId, setIsProductId] = useState(null);\n  const isDeleteInProgressRef = useRef(false);\n  const dialogueStore = useSelector(getDialogueStore);\n\n  let dialogueArray = [];\n  let newMessageArray = [];\n  let isInfoDialogue = false;\n\n  useEffect(() => {\n    if (productId) {\n      setIsProductId(productId);\n    } else {\n      return;\n    }\n  }, [productId]);\n\n  useEffect(() => {\n    if (dialoguesArray.length > 0 && !isNewMessage) {\n      const changedDialogues = dialoguesArray.filter(dialogue => {\n        const newMessageArray = dialogue.newMessages;\n        return newMessageArray.some(obj => obj.userReceiver === user._id);\n      });\n\n      let currentDialogue = dialogueStore._id\n        ? dialogueStore._id\n        : selectedDialogueId;\n      const isChanged = changedDialogues.some(\n        dialogue => dialogue._id === currentDialogue\n      );\n      if (isChanged) {\n        dispatch(changeStatusIsNewMessage(true));\n        dispatch(updateDialoguesArray(currentDialogue));\n      } else {\n        return;\n      }\n    } else {\n      return;\n    }\n  }, [\n    dispatch,\n    dialoguesArray,\n    user._id,\n    dialogueStore._id,\n    selectedDialogueId,\n    isNewMessage,\n  ]);\n\n  useEffect(() => {\n    const getDialogueNew = async () => {\n      isDeleteInProgressRef.current = false;\n      setIsShowComponent(false);\n      dispatch(clearDialogue());\n      dispatch(changeStatusIsNewMessage(false));\n      if (!isProductId || !isUserLogin || selectedDialogueId) {\n        return;\n      }\n      await dispatch(getDialogue({ productId: isProductId }));\n      setIsShowComponent(true);\n    };\n    getDialogueNew();\n  }, [dispatch, isProductId, selectedDialogueId, isUserLogin, isNewMessage]);\n\n  useEffect(() => {\n    const getDialogueNew = async () => {\n      isDeleteInProgressRef.current = false;\n      setIsShowComponent(false);\n      dispatch(clearDialogue());\n      dispatch(changeStatusIsNewMessage(false));\n      if (!selectedDialogueId) {\n        return;\n      }\n      await dispatch(getDialogue({ dialogueId: selectedDialogueId }));\n\n      setIsShowComponent(true);\n    };\n    getDialogueNew();\n  }, [dispatch, selectedDialogueId, isNewMessage]);\n\n  useEffect(() => {\n    if (dialogueStore.length === 0) {\n      return;\n    }\n    if (\n      isDeleteInProgressRef.current ||\n      dialogueStore.newMessages.length === 0\n    ) {\n      return;\n    } else {\n      const currentDialogue = dialogueStore._id;\n      const newMessageArray = dialogueStore.newMessages;\n      const userId = user._id;\n      const userNewMessage = newMessageArray.filter(\n        messageObj => messageObj.userReceiver === userId\n      );\n\n      const deleteNewMessageCallback = async () => {\n        if (isDeleteInProgressRef.current) {\n          return;\n        }\n        isDeleteInProgressRef.current = true;\n        await dispatch(\n          deleteDialogueNewMessage({\n            dialogueId: currentDialogue,\n            arrayNewMessage: userNewMessage,\n          })\n        );\n        await dispatch(updateDialogueStore(currentDialogue));\n      };\n\n      const timer = setTimeout(deleteNewMessageCallback, 20000);\n      return () => {\n        clearTimeout(timer);\n        deleteNewMessageCallback();\n      };\n    }\n  }, [dispatch, dialogueStore, user._id]);\n\n  const isInfo = dialogueArray => {\n    if (dialogueArray[0].textOwner === '64cccb7e5b8c2eb706fe655d') {\n      isInfoDialogue = true;\n    } else {\n      isInfoDialogue = false;\n    }\n  };\n\n  if (dialogueStore.length === 0) {\n    dialogueArray = [];\n    newMessageArray = [];\n  } else {\n    dialogueArray = dialogueStore.messageArray.slice().reverse();\n    newMessageArray = dialogueStore.newMessages;\n    isInfo(dialogueArray);\n  }\n\n  const findAvatar = id => {\n    let myAvatar = '';\n    let otherAvatar = '';\n    const firstAvatar = dialogueStore.userAvatar;\n    const secondAvatar = dialogueStore.productOwnerAvatar;\n    if (user.userAvatar === firstAvatar) {\n      myAvatar = firstAvatar;\n      otherAvatar = secondAvatar;\n    } else {\n      myAvatar = secondAvatar;\n      otherAvatar = firstAvatar;\n    }\n    if (id === user._id) {\n      return myAvatar;\n    } else {\n      return otherAvatar;\n    }\n  };\n\n  const handleQuestionChange = e => {\n    setMyQuestion(e.target.value);\n  };\n\n  const handleButtonClick = async isUserLogin => {\n    if (isUserLogin) {\n      await dispatch(\n        createDialogue({\n          text: myQuestion,\n          productId: isProductId,\n          productOwner: productOwner,\n          dialogueId: dialogueStore._id,\n        })\n      );\n      setMyQuestion('');\n    } else {\n      navigate('/login');\n      return;\n    }\n  };\n\n  const isMessageNew = (text, date) => {\n    if (!newMessageArray || newMessageArray.length === 0) {\n      return false;\n    }\n    const userId = user._id;\n    const isNewMessageArray = newMessageArray.filter(\n      messageObj =>\n        messageObj.userReceiver === userId &&\n        messageObj.message === text &&\n        messageObj.date === date\n    );\n\n    if (isNewMessageArray.length === 0) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  return (\n    <>\n      {isShowComponent && (\n        <div className={s.dialogueContainer}>\n          {!isInfoDialogue && (\n            <div className={s.additionalOpts}>\n              {/* <BiMessageDetail className={s.favoriteIcon} /> */}\n              <Text text=\"Запитати продавця\" textClass=\"productText\" />\n            </div>\n          )}\n          {dialogueArray.length === 0 && (\n            <div className={s.avatar}>\n              <Avatar avatarClass=\"photoDialogueLeft\" src={userAvatar} />\n            </div>\n          )}\n          {dialogueArray.length > 0 && (\n            <ul className={s.dialogueGroup}>\n              {dialogueArray.map((dialogue, index) => (\n                <li key={index}>\n                  <div className={s.dialogueBox}>\n                    {dialogue.textOwner === user._id ? (\n                      <>\n                        <Avatar\n                          avatarClass=\"photoDialogueLeft\"\n                          src={findAvatar(dialogue.textOwner)}\n                        />\n                        <div className={s.dialogueMessage}>\n                          <Text\n                            text={dialogue.text}\n                            textClass={\n                              isMessageNew(dialogue.text, dialogue.date)\n                                ? 'productTextDialogueNewMessage'\n                                : 'productTextDialogue'\n                            }\n                          />\n                          <div className={s.textDate}>\n                            <Text\n                              text={dialogue.date}\n                              textClass=\"productTextDate\"\n                            />\n                          </div>\n                        </div>\n                      </>\n                    ) : (\n                      <>\n                        <div className={s.dialogueMessageRight}>\n                          <Text\n                            text={dialogue.text}\n                            textClass={\n                              isMessageNew(dialogue.text, dialogue.date)\n                                ? 'productTextDialogueNewMessage'\n                                : 'productTextDialogue'\n                            }\n                          />\n                          <div className={s.textDate}>\n                            <Text\n                              text={dialogue.date}\n                              textClass=\"productTextDate\"\n                            />\n                          </div>\n                        </div>\n                        <Avatar\n                          avatarClass=\"photoDialogueRight\"\n                          src={findAvatar(dialogue.textOwner)}\n                        />\n                      </>\n                    )}\n                  </div>\n                </li>\n              ))}\n            </ul>\n          )}\n          {!isInfoDialogue && (\n            <div className={s.textInputArea}>\n              <textarea\n                className={s.textarea}\n                name=\"myQuestion\"\n                value={myQuestion}\n                onChange={handleQuestionChange}\n                rows={5}\n                cols={40}\n              />\n              <div className={s.questionButton}>\n                <Button\n                  text={isUserLogin ? 'Надіслати' : 'Авторизуйтеся'}\n                  btnClass=\"btnLight\"\n                  handleClick={() => handleButtonClick(isUserLogin)}\n                />\n\n                {!isUserLogin && (\n                  <Text\n                    text=\"*Щоб написати продавцю, увійдіть в обліковий запис або зареєструйтеся\"\n                    textClass=\"messageTextBtn\"\n                  />\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Dialogue;\n","// extracted by mini-css-extract-plugin\nexport default {\"ordersWrapper\":\"MySales_ordersWrapper__zezf+\",\"ordersList\":\"MySales_ordersList__s6tus\",\"orderItem\":\"MySales_orderItem__l-5wO\",\"orderInfoWrapper\":\"MySales_orderInfoWrapper__rgdFU\",\"orderInfoItem\":\"MySales_orderInfoItem__zGXXl\",\"orderSum\":\"MySales_orderSum__MPLUJ\",\"orderBottomWrapper\":\"MySales_orderBottomWrapper__P6Du2\",\"waitingPhrase\":\"MySales_waitingPhrase__o59Sm\",\"message\":\"MySales_message__x8quZ\",\"buttonTrashWrapper\":\"MySales_buttonTrashWrapper__Pmv-o\",\"messageWindow\":\"MySales_messageWindow__BmH+V\",\"dismissButton\":\"MySales_dismissButton__9iaeT\",\"buttonBottomWrapper\":\"MySales_buttonBottomWrapper__nRbFL\",\"btnLight\":\"MySales_btnLight__XU4y4\"};","import { useEffect, useState } from 'react';\n// import { NavLink } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getUserSales, updateOrderStatus } from 'redux/order/order-operations';\nimport {\n  getLoadingOrders,\n  selectUserSales,\n  selectUserSalesTotalPages,\n} from 'redux/order/order-selectors';\n// import { getID, getLogin } from 'redux/auth/auth-selectors';\nimport { getID } from 'redux/auth/auth-selectors';\nimport { selectUserReviews } from 'redux/review/review-selectors';\nimport { getUserReviews } from 'redux/review/review-operations';\nimport { orderConfirmationDialogue } from 'redux/dialogue/dialogue-operations';\n\nimport OrderProductsList from 'components/Shared/OrderProductsList/OrderProductsList';\nimport Pagination from 'components/Shared/Pagination/Pagination';\nimport Button from 'components/Shared/Button/Button';\nimport OrderStatusList from 'components/Shared/OrderStatusList/OrderStatusList';\nimport FeedbackWindow from 'components/Shared/FeedbackWindow/FeedbackWindow';\nimport Dialogue from 'components/Dialogue/Dialogue';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport s from './MySales.module.scss';\n\nconst MySales = () => {\n  const dispatch = useDispatch();\n  const isLoading = useSelector(getLoadingOrders);\n  const userId = useSelector(getID);\n  // const isLogin = useSelector(getLogin);\n  const userSales = useSelector(selectUserSales);\n  const totalPages = useSelector(selectUserSalesTotalPages);\n  const myReview = useSelector(selectUserReviews);\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const [currentSelector, setcurrentSelector] = useState('all');\n  const [isFeedbackWindowOpen, setIsFeedbackWindowOpen] = useState(false);\n  const [orderToFeedbackWindow, setOrderToFeedbackWindow] = useState({});\n  const [isMessage, setIsMessage] = useState(false);\n  const [messageId, setMessageId] = useState('');\n  const [customerId, setCustomerId] = useState('');\n\n  console.log(userSales);\n\n  useEffect(() => {\n    dispatch(getUserReviews({ userId }));\n  }, [dispatch, userId, orderToFeedbackWindow]);\n\n  useEffect(() => {\n    dispatch(\n      getUserSales({\n        page: currentPage,\n        selectorName: currentSelector,\n      })\n    );\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }, [dispatch, currentPage, currentSelector]);\n\n  // for pagination\n  const handlePageChange = page => {\n    setCurrentPage(page);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const handleMessageClick = (product, customer) => {\n    setIsMessage(true);\n    setMessageId(product);\n    setCustomerId(customer);\n    console.log(product, customer);\n  };\n\n  const handleDismissClick = () => {\n    setIsMessage(false);\n    setMessageId('');\n    setCustomerId('');\n  };\n\n  const handleButtonClick = optionName => {\n    setcurrentSelector(optionName);\n    setCurrentPage(1);\n  };\n\n  const handleChangeOrderStatus = (id, confirmed, typeDialogue) => {\n    dispatch(\n      updateOrderStatus({\n        orderId: id,\n        confirmed: confirmed,\n        statusNew: false,\n      })\n    );\n    dispatch(\n      getUserSales({\n        page: currentPage,\n        selectorName: currentSelector,\n      })\n    );\n    dispatch(\n      orderConfirmationDialogue({\n        orderId: id,\n        typeDialogue: typeDialogue,\n      })\n    );\n  };\n\n  const toggleIsOpen = (orderId, sellerId, productInfo) => {\n    if (orderId) {\n      setOrderToFeedbackWindow({ orderId, sellerId, productInfo });\n      setIsFeedbackWindowOpen(!isFeedbackWindowOpen);\n      return;\n    }\n    setOrderToFeedbackWindow({});\n    setIsFeedbackWindowOpen(!isFeedbackWindowOpen);\n  };\n\n  useEffect(() => {\n    document.body.style.overflow = isFeedbackWindowOpen ? 'hidden' : 'unset';\n  }, [isFeedbackWindowOpen]);\n\n  return (\n    <>\n      <div className={s.ordersWrapper}>\n        <OrderStatusList\n          currentSelector={currentSelector}\n          handleButtonClick={handleButtonClick}\n        />\n        {userSales.length > 0 && (\n          <ul className={s.ordersList}>\n            {userSales.map(\n              ({\n                _id,\n                orderSum,\n                orderDate,\n                orderNumber,\n                products,\n                productInfo,\n                client,\n                statusNew,\n                confirmed,\n                sellerId,\n              }) => {\n                const isBtnRewiewShown = myReview.find(\n                  ({ orderId }) => orderId === _id\n                );\n                return (\n                  <li className={s.orderItem} key={_id}>\n                    <div className={s.orderInfoWrapper}>\n                      <div className={s.orderInfoItem}>\n                        <p>Покупець:</p>\n                        <p>\n                          {client.customerSecondName} {client.customerFirstName}\n                        </p>\n                        <p>Номер телефону: {client.customerTel}</p>\n                      </div>\n                      <div className={s.orderInfoItem}>\n                        <p>Замовлення &#8470; {orderNumber}</p>\n                        <p>{orderDate}</p>\n                      </div>\n                    </div>\n                    <OrderProductsList\n                      productsForOrder={productInfo}\n                      products={products}\n                    />\n                    <Button\n                      type=\"button\"\n                      btnClass=\"btnLight\"\n                      text=\"Питання покупцю\"\n                      handleClick={() =>\n                        handleMessageClick(products[0]._id, client.customerId)\n                      }\n                    />\n                    <div className={s.orderBottomWrapper}>\n                      {statusNew === true ? (\n                        <>\n                          <Button\n                            type=\"button\"\n                            btnClass=\"btnLight\"\n                            text=\"Підтвердити замовлення\"\n                            handleClick={() =>\n                              handleChangeOrderStatus(_id, true, 'sales')\n                            }\n                          />\n                          <Button\n                            type=\"button\"\n                            btnClass=\"btnDark\"\n                            text=\"Скасувати замовлення\"\n                            handleClick={() =>\n                              handleChangeOrderStatus(_id, false, 'cancel')\n                            }\n                          />\n                        </>\n                      ) : (\n                        <p className={s.waitingPhrase}>\n                          {confirmed === true ? 'Підтверджено' : 'Скасовано'}\n                        </p>\n                      )}\n\n                      <p\n                        className={s.orderSum}\n                      >{`Сума замовлення: ${orderSum} грн.`}</p>\n                    </div>\n                    {statusNew === false && (\n                      <div className={s.buttonBottomWrapper}>\n                        {/* <NavLink\n                          to={isLogin ? '/message' : '/login'}\n                          className={s.btnLight}\n                        >\n                          Перейти до чату\n                        </NavLink> */}\n                        {!isBtnRewiewShown && (\n                          <Button\n                            btnClass=\"btnLight\"\n                            text=\"Залишити відгук\"\n                            handleClick={() =>\n                              toggleIsOpen(_id, sellerId, productInfo)\n                            }\n                          />\n                        )}\n                      </div>\n                    )}\n                    {isFeedbackWindowOpen && (\n                      <FeedbackWindow\n                        hideWindow={toggleIsOpen}\n                        orderToFeedbackWindow={orderToFeedbackWindow}\n                        feedbackType={'asSeller'}\n                      />\n                    )}\n                  </li>\n                );\n              }\n            )}\n          </ul>\n        )}\n        {!isLoading && userSales.length === 0 && (\n          <p className={s.message}>Замовлень з таким статусом у вас ще немає</p>\n        )}\n      </div>\n      {totalPages > 1 && (\n        <Pagination\n          totalPages={totalPages}\n          currentPage={currentPage}\n          onPageChange={handlePageChange}\n        />\n      )}\n      {isMessage && (\n        <div className={s.messageWindow}>\n          <button className={s.dismissButton} onClick={handleDismissClick}>\n            <FontAwesomeIcon icon={faTimes} size=\"lg\" />\n          </button>\n          <Dialogue\n            productInfo={{\n              _id: messageId,\n              owner: userId,\n              customer: customerId,\n            }}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default MySales;\n"],"names":["productInfo","dispatch","useDispatch","navigate","useNavigate","productId","_id","productOwner","owner","selectedDialogueId","userDialogue","userAvatar","useSelector","getUserAvatar","user","getUser","isUserLogin","getLogin","dialoguesArray","getDialoguesArrayStoreNew","isNewMessage","getIsNewMessage","useState","myQuestion","setMyQuestion","isShowComponent","setIsShowComponent","isProductId","setIsProductId","isDeleteInProgressRef","useRef","dialogueStore","getDialogueStore","dialogueArray","newMessageArray","isInfoDialogue","useEffect","length","changedDialogues","filter","dialogue","newMessages","some","obj","userReceiver","currentDialogue","changeStatusIsNewMessage","updateDialoguesArray","getDialogueNew","current","clearDialogue","getDialogue","dialogueId","userId","userNewMessage","messageObj","deleteNewMessageCallback","deleteDialogueNewMessage","arrayNewMessage","updateDialogueStore","timer","setTimeout","clearTimeout","messageArray","slice","reverse","textOwner","isInfo","findAvatar","id","myAvatar","otherAvatar","firstAvatar","secondAvatar","productOwnerAvatar","handleButtonClick","createDialogue","text","isMessageNew","date","message","className","s","Text","textClass","Avatar","avatarClass","src","map","index","name","value","onChange","e","target","rows","cols","Button","btnClass","handleClick","isLoading","getLoadingOrders","getID","userSales","selectUserSales","totalPages","selectUserSalesTotalPages","myReview","selectUserReviews","currentPage","setCurrentPage","currentSelector","setcurrentSelector","isFeedbackWindowOpen","setIsFeedbackWindowOpen","orderToFeedbackWindow","setOrderToFeedbackWindow","isMessage","setIsMessage","messageId","setMessageId","customerId","setCustomerId","console","log","getUserReviews","getUserSales","page","selectorName","window","scrollTo","top","behavior","handleChangeOrderStatus","confirmed","typeDialogue","updateOrderStatus","orderId","statusNew","orderConfirmationDialogue","toggleIsOpen","sellerId","document","body","style","overflow","OrderStatusList","optionName","orderSum","orderDate","orderNumber","products","client","isBtnRewiewShown","find","customerSecondName","customerFirstName","customerTel","OrderProductsList","productsForOrder","type","product","customer","FeedbackWindow","hideWindow","feedbackType","Pagination","onPageChange","onClick","icon","faTimes","size","Dialogue"],"sourceRoot":""}