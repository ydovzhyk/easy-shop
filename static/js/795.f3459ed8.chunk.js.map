{"version":3,"file":"static/js/795.f3459ed8.chunk.js","mappings":"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","sources":["webpack://easy-shop/./src/components/Profile/MySales/MySales.module.scss?fad3","components/Profile/MySales/MySales.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"ordersWrapper\":\"MySales_ordersWrapper__zezf+\",\"ordersList\":\"MySales_ordersList__s6tus\",\"orderItem\":\"MySales_orderItem__l-5wO\",\"orderInfoWrapper\":\"MySales_orderInfoWrapper__rgdFU\",\"orderInfoItem\":\"MySales_orderInfoItem__zGXXl\",\"orderSum\":\"MySales_orderSum__MPLUJ\",\"orderBottomWrapper\":\"MySales_orderBottomWrapper__P6Du2\",\"waitingPhrase\":\"MySales_waitingPhrase__o59Sm\",\"message\":\"MySales_message__x8quZ\",\"buttonTrashWrapper\":\"MySales_buttonTrashWrapper__Pmv-o\",\"buttonBottomWrapper\":\"MySales_buttonBottomWrapper__nRbFL\",\"btnLight\":\"MySales_btnLight__XU4y4\"};","import { useEffect, useState } from 'react';\n// import { NavLink } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getUserSales, updateOrderStatus } from 'redux/order/order-operations';\nimport {\n  getLoadingOrders,\n  selectUserSales,\n  selectUserSalesTotalPages,\n} from 'redux/order/order-selectors';\n// import { getID, getLogin } from 'redux/auth/auth-selectors';\nimport { getID } from 'redux/auth/auth-selectors';\nimport { selectUserReviews } from 'redux/review/review-selectors';\nimport { getUserReviews } from 'redux/review/review-operations';\nimport { orderConfirmationDialogue } from 'redux/dialogue/dialogue-operations';\n\nimport OrderProductsList from 'components/Shared/OrderProductsList/OrderProductsList';\nimport Pagination from 'components/Shared/Pagination/Pagination';\nimport Button from 'components/Shared/Button/Button';\nimport OrderStatusList from 'components/Shared/OrderStatusList/OrderStatusList';\nimport FeedbackWindow from 'components/Shared/FeedbackWindow/FeedbackWindow';\nimport s from './MySales.module.scss';\n\nconst MySales = () => {\n  const dispatch = useDispatch();\n  const isLoading = useSelector(getLoadingOrders);\n  const userId = useSelector(getID);\n  // const isLogin = useSelector(getLogin);\n  const userSales = useSelector(selectUserSales);\n  const totalPages = useSelector(selectUserSalesTotalPages);\n  const myReview = useSelector(selectUserReviews);\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const [currentSelector, setcurrentSelector] = useState('all');\n  const [isFeedbackWindowOpen, setIsFeedbackWindowOpen] = useState(false);\n  const [orderToFeedbackWindow, setOrderToFeedbackWindow] = useState({});\n\n  useEffect(() => {\n    dispatch(getUserReviews({ userId }));\n  }, [dispatch, userId, orderToFeedbackWindow]);\n\n  useEffect(() => {\n    dispatch(\n      getUserSales({\n        page: currentPage,\n        selectorName: currentSelector,\n      })\n    );\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }, [dispatch, currentPage, currentSelector]);\n\n  // for pagination\n  const handlePageChange = page => {\n    setCurrentPage(page);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const handleButtonClick = optionName => {\n    setcurrentSelector(optionName);\n    setCurrentPage(1);\n  };\n\n  const handleChangeOrderStatus = (id, confirmed, typeDialogue) => {\n    dispatch(\n      updateOrderStatus({\n        orderId: id,\n        confirmed: confirmed,\n        statusNew: false,\n      })\n    );\n    dispatch(\n      getUserSales({\n        page: currentPage,\n        selectorName: currentSelector,\n      })\n    );\n    dispatch(\n      orderConfirmationDialogue({\n        orderId: id,\n        typeDialogue: typeDialogue,\n      })\n    );\n  };\n\n  const toggleIsOpen = (orderId, sellerId, productInfo) => {\n    if (orderId) {\n      setOrderToFeedbackWindow({ orderId, sellerId, productInfo });\n      setIsFeedbackWindowOpen(!isFeedbackWindowOpen);\n      return;\n    }\n    setOrderToFeedbackWindow({});\n    setIsFeedbackWindowOpen(!isFeedbackWindowOpen);\n  };\n\n  useEffect(() => {\n    document.body.style.overflow = isFeedbackWindowOpen ? 'hidden' : 'unset';\n  }, [isFeedbackWindowOpen]);\n\n  return (\n    <>\n      <div className={s.ordersWrapper}>\n        <OrderStatusList\n          currentSelector={currentSelector}\n          handleButtonClick={handleButtonClick}\n        />\n        {userSales.length > 0 && (\n          <ul className={s.ordersList}>\n            {userSales.map(\n              ({\n                _id,\n                orderSum,\n                orderDate,\n                orderNumber,\n                products,\n                productInfo,\n                client,\n                statusNew,\n                confirmed,\n                sellerId,\n              }) => {\n                const isBtnRewiewShown = myReview.find(\n                  ({ orderId }) => orderId === _id\n                );\n                return (\n                  <li className={s.orderItem} key={_id}>\n                    <div className={s.orderInfoWrapper}>\n                      <div className={s.orderInfoItem}>\n                        <p>Покупець:</p>\n                        <p>\n                          {client.customerSecondName} {client.customerFirstName}\n                        </p>\n                        <p>Номер телефону: {client.customerTel}</p>\n                      </div>\n                      <div className={s.orderInfoItem}>\n                        <p>Замовлення &#8470; {orderNumber}</p>\n                        <p>{orderDate}</p>\n                      </div>\n                    </div>\n                    <OrderProductsList\n                      productsForOrder={productInfo}\n                      products={products}\n                    />\n                    <div className={s.orderBottomWrapper}>\n                      {statusNew === true ? (\n                        <>\n                          <Button\n                            type=\"button\"\n                            btnClass=\"btnLight\"\n                            text=\"Підтвердити замовлення\"\n                            handleClick={() =>\n                              handleChangeOrderStatus(_id, true, 'sales')\n                            }\n                          />\n                          <Button\n                            type=\"button\"\n                            btnClass=\"btnDark\"\n                            text=\"Скасувати замовлення\"\n                            handleClick={() =>\n                              handleChangeOrderStatus(_id, false, 'cancel')\n                            }\n                          />\n                        </>\n                      ) : (\n                        <p className={s.waitingPhrase}>\n                          {confirmed === true ? 'Підтверджено' : 'Скасовано'}\n                        </p>\n                      )}\n\n                      <p\n                        className={s.orderSum}\n                      >{`Сума замовлення: ${orderSum} грн.`}</p>\n                    </div>\n                    {statusNew === false && (\n                      <div className={s.buttonBottomWrapper}>\n                        {/* <NavLink\n                          to={isLogin ? '/message' : '/login'}\n                          className={s.btnLight}\n                        >\n                          Перейти до чату\n                        </NavLink> */}\n                        {!isBtnRewiewShown && (\n                          <Button\n                            btnClass=\"btnLight\"\n                            text=\"Залишити відгук\"\n                            handleClick={() =>\n                              toggleIsOpen(_id, sellerId, productInfo)\n                            }\n                          />\n                        )}\n                      </div>\n                    )}\n                    {isFeedbackWindowOpen && (\n                      <FeedbackWindow\n                        hideWindow={toggleIsOpen}\n                        orderToFeedbackWindow={orderToFeedbackWindow}\n                        feedbackType={'asSeller'}\n                      />\n                    )}\n                  </li>\n                );\n              }\n            )}\n          </ul>\n        )}\n        {!isLoading && userSales.length === 0 && (\n          <p className={s.message}>Замовлень з таким статусом у вас ще немає</p>\n        )}\n      </div>\n      {totalPages > 1 && (\n        <Pagination\n          totalPages={totalPages}\n          currentPage={currentPage}\n          onPageChange={handlePageChange}\n        />\n      )}\n    </>\n  );\n};\n\nexport default MySales;\n"],"names":["dispatch","useDispatch","isLoading","useSelector","getLoadingOrders","userId","getID","userSales","selectUserSales","totalPages","selectUserSalesTotalPages","myReview","selectUserReviews","useState","currentPage","setCurrentPage","currentSelector","setcurrentSelector","isFeedbackWindowOpen","setIsFeedbackWindowOpen","orderToFeedbackWindow","setOrderToFeedbackWindow","useEffect","getUserReviews","getUserSales","page","selectorName","window","scrollTo","top","behavior","handleChangeOrderStatus","id","confirmed","typeDialogue","updateOrderStatus","orderId","statusNew","orderConfirmationDialogue","toggleIsOpen","sellerId","productInfo","document","body","style","overflow","className","s","OrderStatusList","handleButtonClick","optionName","length","map","_id","orderSum","orderDate","orderNumber","products","client","isBtnRewiewShown","find","customerSecondName","customerFirstName","customerTel","OrderProductsList","productsForOrder","Button","type","btnClass","text","handleClick","FeedbackWindow","hideWindow","feedbackType","Pagination","onPageChange"],"sourceRoot":""}